{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register Delivery Personnel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'reg/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'reg/css/fontawesome-all.min.css' %}">
    <link rel="stylesheet" href="{% static 'reg/css/iofrm-style.css' %}">
    <link rel="stylesheet" href="{% static 'reg/css/iofrm-theme20.css' %}">
</head>
<body>
<div class="form-body without-side">
    <div class="iofrm-layout">
        <div class="img-holder">
            <div class="bg"></div>
            <div class="info-holder">
                <img src="{% static 'reg/images/graphic3.svg' %}" alt="">
            </div>
        </div>

        <div class="form-holder">
            <div class="form-content">
                <div class="form-items">
                    <h3>Register Delivery Personnel</h3>
                    <p>Enter details below to create an account.</p>

                    <form method="post">
                        {% csrf_token %}

                        <input class="form-control" type="text" name="Name" placeholder="Name" required>
                        <input class="form-control" type="text" name="Contact" placeholder="Contact" required>
                        <input class="form-control" type="text" name="City" placeholder="City" required>
                        <input class="form-control" type="text" name="License_no" placeholder="License Number" required>

                        <input class="form-control" type="email" name="Email" placeholder="Email Address" required>
                        <input class="form-control" type="password" name="Password" placeholder="Password" required>

                        <div class="form-button">
                            <button type="submit" class="ibtn">Submit</button>
                        </div>
                    </form>

                    <div class="page-links">
                        <a href="{% static 'reg/login20.html' %}">Already have an account? Login</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JS -->
<script src="{% static 'reg/js/jquery.min.js' %}"></script>
<script src="{% static 'reg/js/popper.min.js' %}"></script>
<script src="{% static 'reg/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'reg/js/main.js' %}"></script>

<!-- Validation Script -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    const validators = [];

    function handleValidation(input, pattern, validMsg, invalidMsg) {
        const feedback = document.createElement('small');
        feedback.style.display = 'block';
        input.parentNode.appendChild(feedback);

        function validate() {
            const value = input.value.trim();
            if (!value) {
                feedback.textContent = '❌ This field is required';
                feedback.style.color = 'red';
                return false;
            } else if (!pattern.test(value)) {
                feedback.textContent = '❌ ' + invalidMsg;
                feedback.style.color = 'red';
                return false;
            } else {
                feedback.textContent = '✅ ' + validMsg;
                feedback.style.color = 'green';
                return true;
            }
        }

        input.addEventListener('input', validate);
        validators.push(validate);
    }

    // Validation rules
    handleValidation(document.querySelector('input[name="Name"]'),
        /^[A-Za-z ]+$/,
        'Valid name',
        'Name must contain only letters and spaces');

    handleValidation(document.querySelector('input[name="Contact"]'),
        /^\d{10}$/,
        'Valid contact number',
        'Contact must be a 10-digit number');

    handleValidation(document.querySelector('input[name="City"]'),
        /^[A-Za-z ]+$/,
        'Valid city name',
        'City must contain only letters');

    handleValidation(document.querySelector('input[name="License_no"]'),
        /^[A-Za-z0-9\-]+$/,
        'Valid license number',
        'License number must be alphanumeric');

    handleValidation(document.querySelector('input[name="Email"]'),
        /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
        'Valid email',
        'Enter a valid email address');

    handleValidation(document.querySelector('input[name="Password"]'),
        /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/,
        'Strong password',
        'Password must include uppercase, lowercase, number, special character, and be at least 8 characters long');

    // Prevent form submission if invalid
    const form = document.querySelector('form');
    form.addEventListener('submit', function (e) {
        let isValid = true;
        validators.forEach(fn => {
            if (!fn()) isValid = false;
        });
        if (!isValid) {
            e.preventDefault();
            alert('❌ Please fix validation errors before submitting.');
        }
    });
});
</script>

</body>
</html>
